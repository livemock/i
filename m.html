<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>LiveOlympiad | Mock Test</title>
<meta name="description" content="LiveOlympiad Mock Test Portal - Free online CBSE mock tests for Classes 1 to 10 in Maths, Science, and English. Responsive UI with timer and question navigator.">
<style>
/* Replace your nav-controls section in CSS with this */
.nav-controls {
  display: flex;
  flex-direction: column; /* üëà buttons will be vertical now */
  gap: 10px;
  margin-top: 18px;
}

.nav-controls button {
  width: 100%;
  padding: 12px;
  font-size: 15px;
  border-radius: 8px;
  background: var(--blue);
  color: #fff;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}

.nav-controls button:hover {
  background: #062c6a;
}
</style>

</head>
<body>

<h1>LiveOlympiad ‚Äî Mock Test</h1>

<div class="card" id="selectCard">
  <select id="classSelect"><option value="">Select Class</option></select>
  <select id="subjectSelect">
    <option value="">Select Subject</option>
    <option value="Maths">Maths</option>
    <option value="Science">Science</option>
    <option value="English">English</option>
  </select>
  <select id="mockSelect"><option value="">Select Mock Test</option></select>
  <button onclick="startTest()">Start Test</button>
</div>

<div class="container" id="main" style="display:none;">
  <div id="timer">Time Left: 30:00</div>
  <div id="test"></div>
  <div class="navigator" id="navigator"></div>
</div>

<script>
// Populate dropdowns
for(let i=1;i<=10;i++){
  classSelect.innerHTML+=`<option value="${i}">Class ${i}</option>`;
  mockSelect.innerHTML+=`<option value="${i}">Mock Test ${i}</option>`;
}

// Helper functions
function makeRNG(seed){let t=seed>>>0;return()=>{t+=0x6D2B79F5;let r=Math.imul(t^(t>>>15),1|t);r^=r+Math.imul(r^(r>>>7),r|61);return((r^(r>>>14))>>>0)/4294967296;}}
function hashSeed(s){let h=2166136261>>>0;for(let i=0;i<s.length;i++){h^=s.charCodeAt(i);h=Math.imul(h,16777619);}return h>>>0;}
function shuffle(a,r){let arr=a.slice();for(let i=arr.length-1;i>0;i--){let j=Math.floor(r()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}
function rand(min,max,r){return Math.floor(r()*(max-min+1))+min;}

// Paragraphs
const paragraphs=[
  {text:`Once upon a time, a farmer had a goose that laid one golden egg each day...`,
   qs:[["What did the goose lay each day?","A golden egg"],["Why did the farmer kill the goose?","He was greedy"],["Moral?","Greed leads to loss"]]},
  {text:`Plastic pollution harms oceans, animals, and even enters our food...`,
   qs:[["Main topic?","Plastic pollution"],["What does it harm?","Oceans and animals"],["How can we solve?","Reduce & recycle plastic"]]}
];

// Question generators
function genMath(c,r){let x=rand(5,30,r),y=rand(5,30,r);return {q:`Simplify: ${x}√ó${y}+${y}`,options:shuffle([x*y+y,x*y,x+y,x*y-y].map(String),r),answer:String(x*y+y)};}
function genSci(c,r){const pool=[["Which law explains action-reaction?","Newton's Third Law"],["Which metal is liquid at room temp?","Mercury"],["Gas made in photosynthesis?","Oxygen"],["Organ that purifies blood?","Kidney"],["Symbol of Iron?","Fe"]];const q=pool[rand(0,pool.length-1,r)];let wrong=shuffle(pool.map(x=>x[1]).filter(x=>x!==q[1]),r).slice(0,3);return {q:q[0],options:shuffle([q[1],...wrong],r),answer:q[1]};}
function genEng(c,r){const arr=[{q:"Past tense of go is ___",a:"went",d:["goed","goes","gone"]},{q:"Synonym of happy",a:"joyful",d:["sad","angry","weak"]},{q:"Antonym of hot",a:"cold",d:["warm","fire","high"]},{q:"He arrived ___ time.",a:"on",d:["in","at","of"]}];const e=arr[rand(0,arr.length-1,r)];return {q:e.q,options:shuffle([e.a,...e.d],r),answer:e.a};}
function genParaQ(r){const para=paragraphs[rand(0,paragraphs.length-1,r)];const out=[];para.qs.forEach((item,i)=>{let opt=shuffle([item[1],'None','All','Not given'],r);let text=i===0?`<p class='para'>${para.text}</p>${item[0]}`:item[0];out.push({q:text,options:opt,answer:item[1]});});return out;}
function makeQs(c,s,m){const seed=hashSeed(`C${c}|${s}|M${m}`),r=makeRNG(seed);let qList=[];for(let i=0;i<30;i++){if(s==='Maths')qList.push(genMath(c,r));else if(s==='Science')qList.push(genSci(c,r));else qList.push(genEng(c,r));}if(s==='English'&&c>=6){const para=genParaQ(r);qList.splice(0,para.length,...para);}return qList;}

// Core logic
let qs=[],sec=1800,timerId,current=0,answers={},seen=new Set();
function startTest(){
  const c=classSelect.value,s=subjectSelect.value,m=mockSelect.value;
  if(!c||!s||!m){alert("Please select Class, Subject & Mock Test");return;}
  qs=makeQs(c,s,m);
  selectCard.style.display='none';main.style.display='block';
  current=0;sec=1800;updateTimer();
  clearInterval(timerId);
  timerId=setInterval(()=>{sec--;updateTimer();if(sec<=0){clearInterval(timerId);submit();}},1000);
  renderNav();showQuestion();
}
function updateTimer(){const m=Math.floor(sec/60),s=String(sec%60).padStart(2,'0');timer.textContent=`Time Left: ${m}:${s}`;}
function saveAnswer(){const sel=document.querySelector(`input[name='q${current}']:checked`);if(sel)answers[current]=sel.value;}
function getSaved(i){return answers[i]||"";}
function showQuestion(){
  seen.add(current);
  const q=qs[current];
  let html=`<div class='test-box'><b>Q${current+1}/${qs.length}</b><br>${q.q}<div class='options'>`;
  q.options.forEach(opt=>{html+=`<label><input type='radio' name='q${current}' value='${opt}' ${getSaved(current)==opt?"checked":""}> ${opt}</label>`;});
  html+=`</div><div class='nav-controls'>`;
  if(current>0)html+=`<button onclick='prevQ()'>Previous</button>`;
  if(current<qs.length-1)html+=`<button onclick='nextQ()'>Next</button>`;
  else html+=`<button onclick='submit()'>Submit Test</button>`;
  html+=`</div></div>`;
  test.innerHTML=html;
  renderNav();
}
function nextQ(){saveAnswer();if(current<qs.length-1){current++;showQuestion();}}
function prevQ(){saveAnswer();if(current>0){current--;showQuestion();}}
function gotoQ(i){saveAnswer();current=i;showQuestion();}
function renderNav(){
  const nav=document.getElementById("navigator");
  nav.innerHTML="";
  for(let i=0;i<qs.length;i++){
    const btn=document.createElement("div");
    btn.textContent=i+1;
    let cls="nav-btn ";
    if(i===current)cls+="current";
    else if(answers[i])cls+="answered";
    else if(seen.has(i))cls+="seen";
    else cls+="unanswered";
    btn.className=cls;
    btn.onclick=()=>gotoQ(i);
    nav.appendChild(btn);
  }
}
function submit(){
  saveAnswer();clearInterval(timerId);
  let correct=0;
  qs.forEach((q,i)=>{if(answers[i]===q.answer)correct++;});
  const total=qs.length,wrong=total-correct,p=((correct/total)*100).toFixed(2);
  test.innerHTML=`<div class='test-box result'>‚úÖ Correct: ${correct}<br>‚ùå Wrong: ${wrong}<br>üìä Score: ${p}%<br><br><button onclick='location.reload()'>Back</button></div>`;
  document.getElementById("navigator").style.display="none";
  timer.textContent='Test Finished';
}
</script>
</body>
</html>

